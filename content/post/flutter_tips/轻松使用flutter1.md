---
title: "Dart & Flutter 开发技巧 1-7"
date: 2021-08-08T19:25:26+08:00
draft: false
tags: ["Flutter"]
categories: ["Flutter"]

---



# Dart & Flutter 开发技巧 1-7

本系列会给大家带来我日常用到的一些开发技巧

事不宜迟，这里是前 7 个技巧。

## 1. 更喜欢 const 而不是 final 而不是 var



![更喜欢 const 而不是 final 而不是 var](https://luckly007.oss-cn-beijing.aliyuncs.com/img/001.const-final-var.png)

## 2. 使用类型注解让代码更安全



![使用类型注释以获得更安全的代码](https://luckly007.oss-cn-beijing.aliyuncs.com/img/002.type-annotation.png)

## 3. 对未使用的函数参数使用下划线



![对未使用的函数参数使用下划线](https://luckly007.oss-cn-beijing.aliyuncs.com/img/003.underscores_unused_arguments.png)

## 4. 函数在 Dart 中是一等公民，可以直接作为参数传递



![函数是 Dart 中的一等公民，它们可以直接作为参数传递。](https://luckly007.oss-cn-beijing.aliyuncs.com/img/004.function-arguments.png)

## 5. 您可以使用 collection-if 和 spreads 与列表、集合和映射



![您可以将 collection-if 和 spreads 与列表、集合和地图一起使用](https://luckly007.oss-cn-beijing.aliyuncs.com/img/005.collection-if-spreads-maps.png)

## 6. 使用级联运算符修改可变变量



![使用级联运算符修改可变变量](https://luckly007.oss-cn-beijing.aliyuncs.com/img/006.cascade-operator.png)

## 7. 可以使用多个 `on` 子句按类型捕获和处理异常



![您可以使用多个 <code>on</code> 子句按类型捕获和处理异常。](https://codewithandrea.com/tips/dart-flutter-easy-wins-1-7/images/007.catch-exception-by-type.png)







# 如何在 Flutter 中构建任何类型的应用程序（并克服教程地狱）

人们经常问我的一个问题是：

> 如何在 Flutter 中构建*电子商务*/*食品订购*/*优步克隆*应用程序？

虽然我的全职工作是创建 Flutter 教程和课程，但我没有时间为那里的每个应用程序制作教程。

最重要的是，您**不需要**依赖教程来构建自己的应用程序。

在这里，我分享了我如何构建复杂应用程序的心理过程，以及有关如何有效学习的一些技巧。

通过不断**学习、练习和获得反馈**，你将能够更快地进步：

让我们深入了解所有细节。👇

## 编程就是玩乐高的过程

在我看来，构建应用程序就像玩乐高积木。

当您玩乐高时，您可以通过将分散的小块拼凑在一起来制作复杂的**东西**。😅

![image-20211019202019667](https://luckly007.oss-cn-beijing.aliyuncs.com/image/image-20211019202019667.png)

而且，当涉及到应用程序开发，可以使复杂的**应用程序**通过组建小**积木**制作的**代码**。

所以如果你想擅长构建复杂的**Flutter**应用程序，你需要一些**深入的**知识：

- Dart 语言
- Flutter 基础和 API

这些是您完成工作的工具。你需要好好学习它们。

但这还不够。您还需要了解：

- 编程原则（SOLID）
- 设计模式
- 调试
- 一些核心包，这样你就不必重新发明轮子了

以及更多。

学习以上所有内容都需要时间。

**但是，在您充分了解基础之前，尝试构建复杂的应用程序需要更长的时间。**

如果您没有扎实的基础，您会挣扎、陷入困境，并在 StackOverflow 上等待数小时或数天的答案。😭

另一面是，一旦你**这样做**有一个坚实的基础，你必须至少有一些关于如何没有太多外界的帮助，进行感。

所有这些听起来不错，但您可能会想：“好吧，但是......我还没有到那里，我仍然不知道如何构建复杂的应用程序。好吧！”。

## 我如何构建复杂的应用程序

事实证明，我花了几个月的时间构建了一个复杂的习惯跟踪应用程序，并创建了一个关于它的完整 Flutter 课程。我将分享我是如何做到的。

------

这个应用程序是 App Store 上顶级健康与健身应用程序之一的克隆，以下是 Flutter 网络演示的最终结果：



***注意**：如果它在移动设备上不起作用，**请**在桌面上尝试。*

尽管最近我开源了好几个复杂的应用程序，

尽管这些年来我构建了许多复杂的应用程序，但这对我来说仍然是一个挑战，因为这个应用程序有很多自定义 UI 和动画。在我开始之前，我不知道如何预先实现其中的许多功能，也不太了解 Flutter 动画。

所以我想分享我在尝试构建这个复杂应用程序时的思考过程。

而且我可以保证，在完成这个项目之前，我有一些错误的开始并经历了大量的反复试验。但我并**没有**被卡住，并找到了解决我一路上遇到的每一个问题的方法。

那我是怎么做的呢？

## 现有应用进行逆向工程

该项目的目标是创建现有应用程序的**工作克隆**。所以我从 App Store下载了程序，并花了很多时间弄清楚主要构建块是什么以及如何实现每个功能。

一些最具挑战性的功能是：

- 通过点击并按住手势控制的动画任务完成环
- 可以通过编程或手势触发的 3D 页面翻转过渡
- 完全自定义的**动画**主题：多个颜色主题，每个主题的多个变体

当我开始时，我**不知道**如何构建这些功能中的任何一个。但我知道它们都涉及动画。

## 文档和谷歌搜索可以走很长的路

幸运的是，Flutter 文档[对动画](https://flutter.dev/docs/development/ui/animations)有很好的[介绍](https://flutter.dev/docs/development/ui/animations)，以及有用的[代码实验室](https://flutter.dev/docs/development/ui/animations#codelabs-tutorials-and-articles)，可以帮助您练习基础知识。

所以我阅读了文档（多次），并试图创建一个心理地图，说明**哪些动画 API**可以用于**哪些应用程序功能**：

![image-20211019202228596](https://luckly007.oss-cn-beijing.aliyuncs.com/image/image-20211019202228596.png)

> 阅读文档可以让您对给定的主题有一个广泛的了解，并对什么是可能的，什么是不可能的有一些直觉。

然后我开始构建功能，一次一个。

有些东西，比如任务完成环，并不太复杂，因为我已经有了一些关于如何使用**自定义画家**和**显式动画的**先验知识：

![任务完成环动画](https://codewithandrea.com/videos/how-to-build-any-app-flutter/images/task-completion-ring-full.gif)

但是其他诸如翻页过渡之类的事情超出了我的能力范围，而且我没有看到应用 Flutter 动画 API 来获得我想要的效果的明显方法。



所以我使用谷歌搜索并找到了[两个](https://medium.com/flutter-community/flutter-flip-card-animation-eb25c403f371) [有用的](https://medium.com/flutter-community/advanced-flutter-matrix4-and-perspective-transformations-a79404a0d828)教程，它们使我朝着正确的方向前进。

我**对**其中一个教程中的代码进行了**试验**，将其分解并重新组装（就像您对乐高积木所做的那样），然后我从中创建了我的第一个解决方案。但是示例代码对于我的用例来说不够好，我需要更进一步。

在这个阶段，我**没有做的**是回到网上寻找其他教程。

相反，我利用从 Flutter 文档中学到的知识改进了我的解决方案，**创造了一些**前所未有的**全新东西**。

这很有价值，所以我决定将其作为[page_flip_builder](https://pub.dev/packages/page_flip_builder)包开源，供其他人使用。我分享了两个关于我如何创建它的完整教程：

- [Flutter Animations：交互式页面翻转小部件](https://codewithandrea.com/videos/flutter-animations-page-flip-widget-part1/)
- [Flutter 动画：交互式页面翻转小部件 [第 2 部分\]](https://codewithandrea.com/videos/flutter-animations-page-flip-widget-part2/)

> 有时，没有现成的教程或软件包可满足您的需求。所以你需要从头开始构建东西，或者通过结合已有的东西来构建。这是一个很好的学习方式。如果您发现一些困难，您可以分享结果以获得奖励积分。💯

## 奖励挑战：iOS 

最终我设法构建了所有复杂的 UI 功能，但我的应用程序遭受了[臭名昭著的 iOS 第一次卡顿问题](https://github.com/flutter/flutter/projects/188)，而且我不打算发布具有严重动画性能问题的 Flutter 动画课程。

所以我在 Flutter repo 上提交[了一个详细的问题](https://github.com/flutter/flutter/issues/76517)。*这可能超出了您在构建 Flutter 应用程序时需要做的事情*。但是这样做对我来说是值得的，因为[其中一个答案](https://github.com/flutter/flutter/issues/76517#issuecomment-783635787)指出该问题与文本渲染有关。事实证明，通过禁用我正在使用的自定义字体，问题几乎完全消失了。

> 要点：有时在公共场合寻求帮助并提供有用的可重复步骤对帮助每个人（包括您自己）大有帮助。

## 永远不会卡住（长时间）

尽管我正在创建一个克隆，但我在选择具有复杂动画的应用程序时还是非常慎重的，并且在此过程中我遇到了许多挑战。

但是，我如何能够首先处理复杂的应用程序，是因为我对所有基础知识都感到满意：

- 我从来不用担心使用什么语法，因为我非常了解 Dart
- 我的代码从一开始就组织得很好，因为我知道如何编写可维护的代码
- 一路上我遇到了错误但我没有卡住，因为我知道如何调试和使用Google DuckDuckGo

对你来说也是如此。

我并不是说你可以在几个月内掌握 Flutter 应用程序开发。

我是说，**好好学习基础知识**将为您节省大量时间。

## 我建立一个待办事项列表app

我得到它。每个应用程序都是不同的，并且有不同的要求。

你总会遇到你不知道的事情。

但是，与其观看一个接一个的教程并尝试学习“如何构建应用程序 X”，不如关注用于构建移动应用程序的基本技术和设计模式。

更好地使用Google DuckDuckGo，并学习如何使用断点和[Flutter 检查器](https://flutter.dev/docs/development/tools/devtools/inspector)调试您的应用程序。

如果我需要上网寻找答案，我会问自己：

- 这个答案很适合我的用例吗？
- 它是否适合我的代码库/我是否需要调整或重写它？
- 它适用于所有边缘情况吗？
- 我**完全**理解这段代码吗？如果没有，我会深入挖掘并尝试获得**更深入的知识**。

一遍又一遍地这样做会给你超能力。你会更少地陷入困境，并设法在不寻求（和等待）帮助的情况下解决问题。您还将**建立**关于什么有效，什么无效的**肌肉记忆**。

> 您可以通过阅读文档和练习来走很长的路。

所以这给我们留下了一个问题：

## 教程和课程是浪费时间和金钱吗？

毕竟，给陷入教程地狱的人的第一条建议是：**构建自己的应用程序**。

这就是我学习的方式，以及我今天仍然做事的方式。

但是你知道吗？我有 15 年以上的经验，我仍然购买课程，**当我知道它们会节省我的时间时**。

如果一个主题/语言/包有**很好的文档记录**并且**易于理解**，你就不需要关于它的教程或课程。

但情况并非总是如此。

以 CSS 为例。许多开发人员讨厌 CSS，因为他们对 CSS 的工作原理有一个**不完整的心理模型**，并且只是在寻找针对特定情况的“技巧”（例如垂直居中）。我自己已经与 CSS 斗争了很长时间，当我应用它们时，大多数教程/文章/答案似乎都不起作用。

所以对我来说，上一门[非常好的但昂贵的](https://css-for-js.com/)CSS 课程比继续挣扎更省时。

当您完全不熟悉某种语言/框架并希望按照结构化方法快速上手时，课程也很棒。

## 在哪里可以找到好的教程和课程？

这是个好问题。更好的是：**谁制造了它们**？

我认为这是关键。您想向他们领域**的专家**学习，并且**擅长用简洁的术语解释复杂的概念**。

所以在 Twitter 和 Reddit 上闲逛，找出谁一直在发布有价值的东西。您甚至可以[在任何技术堆栈上](https://bloggingfordevs.com/trends/)找到[最好的开发人员博客](https://bloggingfordevs.com/trends/)。

------

就 Flutter 而言，这就是我努力做的：创建好的内容并帮助其他人快速跟踪他们的学习。

例如，我花了 60 个小时来构建整个习惯跟踪应用程序，并且我已经将我所有的学习内容浓缩到一个 7 小时的课程中，详细介绍了 Flutter 动画。如果这是您需要学习的主题，那么参加[该课程](https://nnbd.me/fa)可能会为您节省大量时间。

## 学习和实践作为反馈循环

总之，我将教程/课程和刻意练习视为补充任务。

除了阅读文档、观看教程和参加课程之外，您还需要自己**练习构建应用程序**，并从错误中吸取教训。

通过创建一个不断**学习和练习的**循环，你将能够更快地进步。



请注意**这是一个循环**。这是关于在你学**完之后立即**练习你所学的。如果你一个接一个地看教程，你不会因为没有练习而保留任何有意义的东西。

同样，如果你只是自己练习，你的编码风格也会受到影响。这就是**加入开源项目**并**与他人合作**可以产生**巨大影响的地方**。

归根结底，其中很多都是让自己接触不同的做事方式，学习权衡，并找到适合您和您的项目的方法。

有关更多详细信息，您可以查看我的[23 条成为更好软件工程师的重要提示](https://codewithandrea.com/videos/top-tips-software-engineers/)列表。



如果您正在寻找有关 Flutter 应用程序开发的**好资源**，您应该查看[我的时事通讯](https://codewithandrea.com/newsletter/)。

我花了很多时间整理了**一份**资源的**精选列表**，引导您完成**最重要的主题**，并帮助您选择**正确的工具和软件包**。我的时事通讯将所有这些整合到一个电子邮件课程中，您今天就可以免费加入该课程。👇

快乐编码！

