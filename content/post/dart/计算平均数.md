---
title: "计算平均数"
date: 2021-08-30T16:46:23+08:00
draft: true
---

# list - flutter -如何计算列表中的平均数据？

我有一个有关用户食物的`List<Comment>`。
看起来像这样:

```
[
    {userId: 1,
     rating: 4.5
    },
    {userId: 2,
     rating: 4.0
    },
    {userId: 3,
     rating: 3.5
    },
    {userId: 4,
     rating: 3.0
    }

   ...
];
```


我想获得平均评分。 `AVERAGE = Number of ratings : total user`，如何在dart中应用呢？



**最佳答案**



```
  var values = [
    {'userId': 1, 'rating': 4.5},
    {'userId': 2, 'rating': 4.0},
    {'userId': 3, 'rating': 3.5},
    {'userId': 4, 'rating': 3.0}
  ];

  var result = values.map((m) => m['rating']).reduce((a, b) => a + b) / values.length;
  print(result);
```

# dart - 如何从Dart中的列表中找到最小值和最大值？

我已经尝试了以下代码段。但是它将引发有关类型转换的错误。因为列表具有整数和 double 值的组合。但是 **list.reduce(min)**返回唯一的整数值。因此，您能为这些人提供解决方案吗？提前致谢。
**注意-**但是，我从用户那里获得了唯一的**动态**列表。

```
 final List<dynamic> y = [12, 12, 23.5, 2, 19, 1, 23, 16, 29.7, 32, 45, 68, 23, 21];
 List<num> yValues = y;
 num yMin = yValues.reduce(min);
 num yMax = yValues.reduce(max);
```



**最佳答案**

您正在编写List的类型为`List<dynamic>`。由于`min`和`max`仅适用于`num`类型，因此我们需要将列表中的每个元素`cast`转换为`num`，如下所示:

```
import 'dart:math';

void main() {
  final List<dynamic> y = <dynamic>[12, 12, 23.5, 2, 19, 1, 23, 16, 29.7, 32, 45, 68, 23, 21];
  final yMin = y.cast<num>().reduce(min);
  final yMax = y.cast<num>().reduce(max);
  print(yMin); // 1
  print(yMax); // 68
```

# flutter - 如何在Dart/Flutter中将某些元素从一个Map复制到新Map中？

如何在Dart / Flutter中将某些元素从一个Map复制到新Map中？

```dart
Old_Map = {
  'A' : {Big : 'A', Small : 'a' },
  'B' : {Big : 'B', Small : 'b' },
  'C' : {Big : 'C', Small : 'c' },
  'D' : {Big : 'D', Small : 'd' },
}

Old_Map => New_Map
```

我只想要

```dart
'B' : {Big : 'B', Small : 'b' },
'C' : {Big : 'C', Small : 'c' },
```



**最佳答案**

你可以这样

```dart
 final oldMap = {
    'A': {'Big': 'A', 'Small': 'a'},
    'B': {'Big': 'B', 'Small': 'b'},
    'C': {'Big': 'C', 'Small': 'c'},
    'D': {'Big': 'D', 'Small': 'd'},
  };

  final newMap =
      Map.fromIterable(oldMap.keys.where((k) => k == 'B' || k =='C'), 
      key: (k) => k, value: (v) => oldMap[v]);
```

由于`keys`返回 map 键的`Iterable<String>`，因此您可以使用`where`方法检查所需的键，然后可以基于旧 map 值填充值。
